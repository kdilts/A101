<html>
	<head></head>
	<body bgcolor = "grey">
		<script src="js/three.min.js"></script>
		<script src="js/Quaternion.js"></script>
		<script src="js/OrbitControls.js"></script>
		<form style = "position:absolute; left:1024; top:5">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<b1>Objects</b1><br><hr>
			<input type="checkbox" id="p1" checked>Population 1</input><br>
			<input type="checkbox" id="p2" checked>Population 2</input><hr>
			<input type="checkbox" id="oc" checked>Open Star Clusters</input><br>
			<input type="checkbox" id="gc" checked>Globular Star Clusters</input><br>
			<input type="checkbox" id="neb" checked>Gaseous Nebulae</input><hr>
			<input type="checkbox" id="sun" checked>Sun</input><br><hr>
			<b1>Rotate</b1>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;
			<b1>Move</b1><br>
			&nbsp;&nbsp;&nbsp;
			<input type="button" value="^" id="rotateUp"></input>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="button" value="^" id="moveUp"></input><br>
			<input type="button" value="<-" id="rotateLeft"></input>
			<input type="button" value="->" id="rotateRight"></input>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;
			<input type="button" value="<-" id="moveLeft"></input>
			<input type="button" value="->" id="moveRight"></input><br>
			&nbsp;&nbsp;&nbsp;
			<input type="button" value="v" id="rotateDown"></input>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="button" value="v" id="moveDown"></input><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<b1>Zoom</b1><br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="button" value="+" id="zoomIn"></input>
			<input type="button" value="-" id="zoomOut"></input><br>
		</form>
		
		<script>
	    	document.documentElement.style.overflow = 'hidden';  // firefox, chrome
		  	document.body.scroll = "no"; // ie only

			var sceneWidth = 1024*.975; var sceneHeight = 768*.95;

			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(75, sceneWidth/sceneHeight, 0.1, 1000);
			var renderer = new THREE.WebGLRenderer();
			var controls = new THREE.OrbitControls(camera);
			controls.target.z = 0;

			var dist = 10; var height = 15; var spd = .0175; var theta = 0;

			renderer.setSize(sceneWidth, sceneHeight);
			document.body.appendChild(renderer.domElement);

			var rotate = function(){
				camera.position.set(Math.cos(theta)*dist,height,Math.sin(theta)*dist);
				camera.lookAt(new THREE.Vector3(0,0,0));
				camera.position.setLength(dist);
			}

			rotate();

			var axisHelper = new THREE.AxisHelper(15); // mesh 0
			scene.add(axisHelper);
			//axisHelper.visible = false;

			var addStar = function(x,y,z,r,c){
				var geometry = new THREE.SphereGeometry(r,10,10);
				var material = new THREE.MeshBasicMaterial({color: c});
				var star = new THREE.Mesh(geometry, material);
				star.position.x = x; star.position.y = y; star.position.z = z;
				scene.add(star);
			}

			var cylindricalToXYZ = function(r,theta,z){
				return [r*Math.cos(theta), r*Math.sin(theta), z];
			}

			// sun -- mesh 1
			addStar(0,0,0,.35/16,0xffff00);

			// galactic bar
			for(var x = 0; x < 50; x++){
				addStar(
					Math.cos(Math.random()*Math.PI*2)*2,
					Math.random()*.2-.1,
					Math.sin(Math.random()*Math.PI*2)/2,
					.35/16,
					0xffffff
				);
			}

			// perseus arm
			for(var x = 0; x < Math.PI*3/2; x += .05){
				addStar(
					-Math.exp(x/1.5)*Math.cos(x)-1+Math.random()-.5,
					Math.random()*.2-.1,
					Math.exp(x/1.5)*Math.sin(x)+Math.random()-.5,
					.35/8,
					0xff0000
				);				
			}

			// centarus arm
			for(var x = 0; x < Math.PI*3/2; x += .05){
				addStar(
					Math.exp(x/1.5)*Math.cos(x)+1+Math.random()-.5,
					Math.random()*.2-.1,
					-Math.exp(x/1.5)*Math.sin(x)+Math.random()-.5,
					.35/8,
					0x0000ff
				);				
			}


			var render = function(){
				requestAnimationFrame(render);
				renderer.render(scene, camera);
			};

			// check boxes
			var p1 = document.getElementById('p1');
			var p2 = document.getElementById('p2');
			var oc = document.getElementById('oc');
			var gc = document.getElementById('gc');
			var neb = document.getElementById('neb');
			var sunBox = document.getElementById('sun');

			var boxes = [p1, p2, oc, gc, neb, sunBox];

			sunBox.addEventListener('click', function(){
				if(sunBox.checked){ scene.children[1].visible = true; }
				else{ scene.children[1].visible = false; }
			});

			p1.addEventListener('click', function(){
				if(p1.checked){
				}
				else{
				}
			});

			p2.addEventListener('click', function(){
				if(p2.checked){
				}
				else{
				}
			});

			// rotate buttons
			var rotateUp = document.getElementById('rotateUp');
			var rotateDown = document.getElementById('rotateDown');
			var rotateLeft = document.getElementById('rotateLeft');
			var rotateRight = document.getElementById('rotateRight');

			rotateUp.addEventListener('click', function(){
				controls.rotateUp(Math.PI/9);
				controls.update();
			});

			rotateDown.addEventListener('click', function(){
				controls.rotateUp(-Math.PI/9);
				controls.update();
			});

			rotateLeft.addEventListener('click', function(){
				controls.rotateLeft(Math.PI/9);
				controls.update();
			});

			rotateRight.addEventListener('click', function(){
				controls.rotateLeft(-Math.PI/9);
				controls.update();
			});

			// move buttons
			var moveUp = document.getElementById('moveUp');
			var moveDown = document.getElementById('moveDown');
			var moveLeft = document.getElementById('moveLeft');
			var moveRight = document.getElementById('moveRight');

			moveUp.addEventListener('click', function(){
				controls.panUp(1);
				controls.update();
			});

			moveDown.addEventListener('click', function(){
				controls.panUp(-1);
				controls.update();
			});

			moveLeft.addEventListener('click', function(){
				controls.panLeft(1);
				controls.update();
			});

			moveRight.addEventListener('click', function(){
				controls.panLeft(-1);
				controls.update();
			});

			// zoom buttons
			var zoomIn = document.getElementById('zoomIn');
			var zoomOut = document.getElementById('zoomOut');

			zoomIn.addEventListener('click', function(){
				controls.dollyIn(1.1);
				controls.update();
			});

			zoomOut.addEventListener('click', function(){
				controls.dollyOut(1.1);
				controls.update();
			});

			var buttons = [
				rotateUp, rotateDown, rotateLeft, rotateRight,
				moveUp, moveDown, moveLeft, moveRight,
				zoomIn, zoomOut
			];

			render();
		</script>
	</body>
</html>